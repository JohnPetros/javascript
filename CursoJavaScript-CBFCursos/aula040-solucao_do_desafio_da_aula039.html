<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CBF Cursos - JavaScript</title>
  </head>
  <style>
    #jogador{
        position: absolute;
        top: 0;
        left: 200;
        background-color: blue;
        width: 50px;
        height: 50px;
    }
    button{
        width: 85px;
        height: 50px;
        font-size: 20px;
    }
  </style>
  <script>

    var jog, vel, dx, dy, px, py, anima
   
    function iniciar(){
        vel = 2
        dx = 1
        dy = 0
        px =0
        py = 0
        estado = true // true = movendo - false = parado
        jog = document.getElementById('jogador')
        jog.addEventListener('click', moverParar)
        document.getElementById('bt1').addEventListener('click', function(){
            if(!estado){
                estado = true
                requestAnimationFrame(game)
                jog.style.backgroundColor = 'blue'
            } 
        })
        document.getElementById('bt2').addEventListener('click', function(){
            if(estado){
                estado = false
                cancelAnimationFrame(anima)
                jog.style.backgroundColor = 'red'
            } 
        })
        game()
    }

    function moverParar(){
        if (estado){
                estado = false
                jog.style.backgroundColor = 'red'
                cancelAnimationFrame(anima)
            } else {
                estado = true
                jog.style.backgroundColor = 'blue'
                anima = requestAnimationFrame(game)
            }  
    }

    function game(){
        px += dx * vel
        //py += dy * vel
        jog.style.left = px + 'px'
        //jog.style.top = px + 'px'
        if(px > 800){
            dx = -1
        } else if(px < 200){
            dx = 1
        }
        anima = requestAnimationFrame(game)
    }

    window.addEventListener('load', iniciar)

  </script>
  <body>

   <div id="jogador"></div>
   <button id="bt1">Iniciar</button>
   <button id="bt2">Parar</button>

  </body>
</html>
